# MCP è®¡ç®—å™¨æœåŠ¡å™¨

ä¸€ä¸ªåŸºäº **SSE (Server-Sent Events)** çš„ Model Context Protocol è®¡ç®—å™¨æœåŠ¡å™¨ï¼Œè¿è¡Œåœ¨ 8000 ç«¯å£ã€‚

## åŠŸèƒ½ç‰¹æ€§

âœ¨ æ”¯æŒçš„è®¡ç®—æ“ä½œï¼š
- â• **åŠ æ³•** (add): è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ
- â– **å‡æ³•** (subtract): è®¡ç®—ä¸¤ä¸ªæ•°çš„å·®  
- âœ–ï¸ **ä¹˜æ³•** (multiply): è®¡ç®—ä¸¤ä¸ªæ•°çš„ç§¯
- â— **é™¤æ³•** (divide): è®¡ç®—ä¸¤ä¸ªæ•°çš„å•†
- ğŸ”¢ **å¹‚è¿ç®—** (power): è®¡ç®— a çš„ b æ¬¡æ–¹
- âˆš **å¹³æ–¹æ ¹** (sqrt): è®¡ç®—ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹
- ğŸ¯ **é˜¶ä¹˜** (factorial): è®¡ç®—éè´Ÿæ•´æ•°çš„é˜¶ä¹˜
- ğŸ‘¤ **å¯åŠ¨è€…ä¿¡æ¯** (get_operator_info): æŸ¥çœ‹æœåŠ¡å™¨å¯åŠ¨è€…å’Œé…ç½®ä¿¡æ¯

ğŸ”’ **å®‰å…¨ç‰¹æ€§**ï¼š
- å¿…é¡»è®¾ç½®å¯åŠ¨è€…å§“åæ‰èƒ½å¯åŠ¨æœåŠ¡å™¨
- ç¯å¢ƒå˜é‡éªŒè¯ï¼Œç¡®ä¿é…ç½®æ­£ç¡®

## æŠ€æœ¯æ ˆ

- ğŸš€ **Node.js** + **TypeScript**
- ğŸ“¡ **SSE (Server-Sent Events)** ä¼ è¾“åè®®
- ğŸŒ **Express** ä½œä¸º HTTP æœåŠ¡å™¨
- ğŸ”§ **MCP SDK** (@modelcontextprotocol/sdk)

## å®‰è£…

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build
```

## é…ç½®

**âš ï¸ å¿…é¡»è®¾ç½®ç¯å¢ƒå˜é‡æ‰èƒ½å¯åŠ¨æœåŠ¡å™¨ï¼**

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®å¯åŠ¨è€…å§“åï¼š

```env
# å¯åŠ¨è€…å§“åï¼ˆå¿…éœ€ï¼‰
OPERATOR_NAME=å¼ ä¸‰

# æœåŠ¡å™¨ç«¯å£
PORT=8000

# Node ç¯å¢ƒ
NODE_ENV=development
```

## è¿è¡Œ

```bash
# å¯åŠ¨æœåŠ¡å™¨
npm start

# æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œè®¾ç½®ç¯å¢ƒå˜é‡
OPERATOR_NAME=å¼ ä¸‰ npm start

# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡æ–°æ„å»ºï¼‰
npm run dev
```

æœåŠ¡å™¨å°†è¿è¡Œåœ¨ `http://localhost:8000`

## API ç«¯ç‚¹

### å¥åº·æ£€æŸ¥
```bash
GET http://localhost:8000/health
```

è¿”å›æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ã€‚

### SSE è¿æ¥
```bash
GET http://localhost:8000/sse
```

å»ºç«‹ SSE è¿æ¥ï¼Œç”¨äº MCP é€šä¿¡ã€‚

## ä½¿ç”¨ç¤ºä¾‹

### è¿æ¥åˆ°æœåŠ¡å™¨

```javascript
// å®¢æˆ·ç«¯è¿æ¥ç¤ºä¾‹
const eventSource = new EventSource('http://localhost:8000/sse');

eventSource.onmessage = (event) => {
  console.log('æ”¶åˆ°æ¶ˆæ¯:', event.data);
};
```

### å¯ç”¨å·¥å…·

1. **åŠ æ³•è¿ç®—**
   ```json
   {
     "name": "add",
     "arguments": {
       "a": 10,
       "b": 5
     }
   }
   ```
   è¿”å›: `10 + 5 = 15`

2. **å‡æ³•è¿ç®—**
   ```json
   {
     "name": "subtract",
     "arguments": {
       "a": 10,
       "b": 5
     }
   }
   ```
   è¿”å›: `10 - 5 = 5`

3. **ä¹˜æ³•è¿ç®—**
   ```json
   {
     "name": "multiply",
     "arguments": {
       "a": 10,
       "b": 5
     }
   }
   ```
   è¿”å›: `10 Ã— 5 = 50`

4. **é™¤æ³•è¿ç®—**
   ```json
   {
     "name": "divide",
     "arguments": {
       "a": 10,
       "b": 5
     }
   }
   ```
   è¿”å›: `10 Ã· 5 = 2`

5. **å¹‚è¿ç®—**
   ```json
   {
     "name": "power",
     "arguments": {
       "a": 2,
       "b": 3
     }
   }
   ```
   è¿”å›: `2^3 = 8`

6. **å¹³æ–¹æ ¹**
   ```json
   {
     "name": "sqrt",
     "arguments": {
       "a": 16
     }
   }
   ```
   è¿”å›: `âˆš16 = 4`

7. **é˜¶ä¹˜**
   ```json
   {
     "name": "factorial",
     "arguments": {
       "n": 5
     }
   }
   ```
   è¿”å›: `5! = 120`

8. **è·å–å¯åŠ¨è€…ä¿¡æ¯**
   ```json
   {
     "name": "get_operator_info",
     "arguments": {}
   }
   ```
   è¿”å›æœåŠ¡å™¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¯åŠ¨è€…å§“åã€ç‰ˆæœ¬ã€ç«¯å£ç­‰

## é¡¹ç›®ç»“æ„

```
mcp-calculator/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts          # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ dist/                  # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## å¼€å‘

```bash
# ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨é‡æ–°ç¼–è¯‘
npm run watch

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ
npm start
```

## è®¸å¯è¯

MIT

